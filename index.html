<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brendan 8===D~</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- SVG animated background -->
    <svg id="bg-lines" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none;" width="100%" height="100%" viewBox="0 0 200 200" preserveAspectRatio="none">
      <defs>
        <pattern id="diagonalLines" patternUnits="userSpaceOnUse" width="8" height="8" patternTransform="rotate(45)">
          <rect x="0" y="0" width="0.5" height="8" fill="white" opacity="0.04" />
        </pattern>
      </defs>
      <rect id="bg-rect" x="0" y="0" width="100%" height="100%" fill="url(#diagonalLines)" />
    </svg>
    <!-- Media Player -->
    <div id="media-player" style="position:fixed;top:24px;left:24px;z-index:10;background:rgba(20,20,20,0.85);border-radius:14px;padding:16px 24px 12px 24px;box-shadow:0 2px 12px 0 rgba(0,0,0,0.18);display:flex;flex-direction:column;align-items:flex-start;min-width:260px;backdrop-filter:blur(2px);">
      <div id="song-title" style="font-size:1.1rem;font-weight:600;color:#fff;letter-spacing:0.03em;margin-bottom:8px;margin-left:28px;width:calc(100% - 28px);text-align:center;">Squad Killaz - Ai 47</div>
      <div style="width:100%;display:flex;align-items:center;gap:10px;">
        <span id="current-time" style="width:38px;min-width:38px;text-align:right;font-size:0.98rem;color:#00c3ff;opacity:0.85;margin-left:2px;user-select:none;">0:00</span>
        <div id="progress-bar-container" style="flex:1;height:6px;background:rgba(255,255,255,0.13);border-radius:3px;overflow:hidden;cursor:pointer;min-width:0;margin-left:0;">
          <div id="progress-bar" style="height:100%;width:0%;background:linear-gradient(90deg,#00ffb2 0%,#00c3ff 100%);border-radius:3px;"></div>
        </div>
      </div>
      <div style="width:100%;display:flex;flex-direction:column;align-items:center;margin-top:10px;gap:8px;">
        <div style="display:flex;justify-content:center;align-items:center;gap:24px;width:100%;margin-bottom:2px;margin-left:38px;">
          <button id="prev-song" aria-label="Previous Song" style="background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;">
            <svg viewBox="0 0 32 32" width="22" height="22" fill="#00c3ff"><polygon points="22,6 10,16 22,26"/><rect x="7" y="6" width="3" height="20" rx="1.5"/></svg>
          </button>
          <button id="play-pause" aria-label="Play/Pause" style="width:32px;height:32px;border:none;background:none;outline:none;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;">
            <svg id="play-icon" viewBox="0 0 32 32" width="22" height="22" style="display:block;" fill="#00c3ff"><polygon points="8,6 26,16 8,26"/></svg>
            <svg id="pause-icon" viewBox="0 0 32 32" width="22" height="22" style="display:none;" fill="#00c3ff"><rect x="8" y="6" width="5" height="20" rx="2.5"/><rect x="19" y="6" width="5" height="20" rx="2.5"/></svg>
          </button>
          <button id="next-song" aria-label="Next Song" style="background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;">
            <svg viewBox="0 0 32 32" width="22" height="22" fill="#00c3ff"><polygon points="10,6 22,16 10,26"/><rect x="22" y="6" width="3" height="20" rx="1.5"/></svg>
          </button>
        </div>
        <div style="display:flex;align-items:center;gap:10px;width:100%;">
          <span style="width:38px;min-width:38px;text-align:right;display:inline-block;margin-left:2px;"><svg viewBox="0 0 20 20" width="18" height="18" style="opacity:0.7;vertical-align:middle;" fill="#00c3ff"><path d="M3 8v4h3l4 4V4L6 8H3z"/></svg></span>
          <input id="volume-slider" type="range" min="0" max="1" step="0.01" value="1" style="flex:1;appearance:none;height:6px;border-radius:3px;background:linear-gradient(90deg,#00ffb2 0%,#00c3ff 100%);outline:none;cursor:pointer;margin-left:0;"/>
        </div>
      </div>
    </div>
    <div class="center-title-wrapper" id="centerTitleWrapper">
        <h1 class="center-title">BRENDAN</h1>
    </div>
    <!-- Background audio (only one instance, controlled by media player) -->
    <audio id="bg-audio" preload="auto" autoplay></audio>
    <main>
        <section id="home">
            <!-- Empty, handled by fixed title -->
        </section>
        <section id="socials">
            <div style="height: 100vh;"></div>
            <div class="socials-fixed-wrapper hide" id="socialsFixedWrapper">
                <div class="outer-box">
                    <h2>SOCIALS</h2>
                    <div class="social-links-grid">
                        <a class="social-link" href="https://discord.gg/YMVBbertyq" target="_blank">
                            <span class="icon"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/discord.svg" alt="DISCORD SERVER" style="width: 28px; height: 28px; vertical-align: middle;"></span> Discord Server
                        </a>
                        <a class="social-link" href="https://github.com/710bren" target="_blank">
                            <span class="icon"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/github.svg" alt="GITHUB" style="width: 28px; height: 28px; vertical-align: middle;"></span> GitHub
                        </a>
                        <a class="social-link" href="https://instagram.com/710bren" target="_blank">
                            <span class="icon"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/instagram.svg" alt="INSTAGRAM" style="width: 28px; height: 28px; vertical-align: middle;"></span> Instagram
                        </a>
                        <a class="social-link" href="https://twitch.tv/710bren" target="_blank">
                            <span class="icon"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/twitch.svg" alt="TWITCH" style="width: 28px; height: 28px; vertical-align: middle;"></span> Twitch
                        </a>
                        <a class="social-link" href="https://youtube.com/@710bren" target="_blank">
                            <span class="icon"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/youtube.svg" alt="YOUTUBE" style="width: 28px; height: 28px; vertical-align: middle;"></span> YouTube
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!-- (Removed duplicate audio element) -->
    <script>
    // Hide the fixed title when scrolling to socials
    // Media player logic with play/pause and volume
    (function(){
      // Dynamically build playlist from all .mp3 files in /media
      const playlist = [];
      // List of .mp3 files in /media (auto-generated, update this list if you add/remove files)
      const mediaFiles = [
        'media/Squad_Killaz_-_Ai-47.mp3',
        'media/How_We_Roll_-_Alvin_and_the_Chimpmunks.mp3'
      ];
      mediaFiles.forEach(path => {
        // Extract filename without extension and replace _ with space (no auto-capitalization)
        let name = path.split('/').pop().replace(/\.mp3$/i, '');
        name = name.replace(/_/g, ' ');
        playlist.push({ src: path, title: name });
      });
      let currentSong = 0;

      const audio = document.getElementById('bg-audio');
      const progressBar = document.getElementById('progress-bar');
      const progressBarContainer = document.getElementById('progress-bar-container');
      const playPauseBtn = document.getElementById('play-pause');
      const playIcon = document.getElementById('play-icon');
      const pauseIcon = document.getElementById('pause-icon');
      const volumeSlider = document.getElementById('volume-slider');
      const songTitle = document.getElementById('song-title');
      const nextBtn = document.getElementById('next-song');
      const prevBtn = document.getElementById('prev-song');
      let seeking = false;

      function loadSong(idx) {
        if (!playlist[idx]) return;
        audio.pause();
        audio.src = playlist[idx].src;
        songTitle.textContent = playlist[idx].title;
        audio.load();
        // Try to play, but always update the button state
        audio.play().then(() => {
          updatePlayPause();
        }).catch(() => {
          // If play fails (autoplay policy), show play icon
          playIcon.style.display = '';
          pauseIcon.style.display = 'none';
        });
      }

      function updateProgress() {
        if (!audio.duration) return;
        const percent = (audio.currentTime/audio.duration)*100;
        progressBar.style.width = percent+"%";
        // Update current time display
        const currentTimeSpan = document.getElementById('current-time');
        if (currentTimeSpan) {
          currentTimeSpan.textContent = formatTime(audio.currentTime);
        }
      }

      function formatTime(sec) {
        sec = Math.floor(sec);
        const m = Math.floor(sec / 60);
        const s = sec % 60;
        return m + ":" + (s < 10 ? "0" : "") + s;
      }

      function updatePlayPause() {
        if (audio.paused) {
          playIcon.style.display = '';
          pauseIcon.style.display = 'none';
        } else {
          playIcon.style.display = 'none';
          pauseIcon.style.display = '';
        }
      }

      playPauseBtn.addEventListener('click', function(){
        if(audio.paused) {
          audio.play().then(updatePlayPause).catch(updatePlayPause);
        } else {
          audio.pause();
          updatePlayPause();
        }
      });

      // Keep button state in sync with actual playback
      audio.addEventListener('playing', updatePlayPause);
      audio.addEventListener('pause', updatePlayPause);

      audio.addEventListener('timeupdate', updateProgress);
      audio.addEventListener('loadedmetadata', updateProgress);

      // Seek bar click and drag
      progressBarContainer.addEventListener('mousedown', function(e){
        seeking = true;
        seek(e);
      });
      document.addEventListener('mousemove', function(e){
        if(seeking) seek(e);
      });
      document.addEventListener('mouseup', function(){
        seeking = false;
      });
      progressBarContainer.addEventListener('click', function(e){
        seek(e);
      });
      function seek(e){
        if (!audio.duration) return;
        const rect = progressBarContainer.getBoundingClientRect();
        let x = e.clientX - rect.left;
        x = Math.max(0, Math.min(x, rect.width));
        const percent = x/rect.width;
        audio.currentTime = percent * audio.duration;
      }

      // Volume slider
      function updateVolumeGradient(val) {
        const percent = val * 100;
        volumeSlider.style.background = `linear-gradient(90deg,#00ffb2 0%,#00c3ff ${percent}%,rgba(255,255,255,0.13) ${percent}%,rgba(255,255,255,0.13) 100%)`;
      }
      volumeSlider.addEventListener('input', function(){
        audio.volume = parseFloat(this.value);
        updateVolumeGradient(this.value);
      });
      // Set initial volume and gradient
      audio.volume = 0.05;
      volumeSlider.value = 0.05;
      updateVolumeGradient(0.05);

      // Next/Prev song
      nextBtn.addEventListener('click', function(){
        currentSong = (currentSong + 1) % playlist.length;
        loadSong(currentSong);
      });
      prevBtn.addEventListener('click', function(){
        currentSong = (currentSong - 1 + playlist.length) % playlist.length;
        loadSong(currentSong);
      });

      // Auto play next song when ended
      audio.addEventListener('ended', function(){
        currentSong = (currentSong + 1) % playlist.length;
        loadSong(currentSong);
      });

      // Load first song on page load
      window.addEventListener('DOMContentLoaded', function() {
        loadSong(currentSong);
        // Set initial current time display
        const currentTimeSpan = document.getElementById('current-time');
        if (currentTimeSpan) {
          currentTimeSpan.textContent = formatTime(0);
        }
      });
    })();
    window.addEventListener('scroll', function() {
        const wrapper = document.getElementById('centerTitleWrapper');
        const socials = document.getElementById('socials');
        const socialsFixed = document.getElementById('socialsFixedWrapper');
        const trigger = socials.getBoundingClientRect().top + window.scrollY - window.innerHeight/2;
        const socialsBox = socialsFixed;

        // Title fade out when socials comes in
        if(window.scrollY > trigger) {
            wrapper.classList.add('hide');
            socialsBox.classList.remove('hide');
        } else {
            wrapper.classList.remove('hide');
            socialsBox.classList.add('hide');
        }
    });

    window.addEventListener('beforeunload', function() {
        window.scrollTo(0, 0);
    });

    // Animate SVG background
    (function animateSVGBackground() {
      const pattern = document.getElementById('diagonalLines');
      let offset = 0;
      let lastFrame = 0;
      const fps = 90;
      const patternWidth = 8;
      function step(now) {
        if (!lastFrame || now - lastFrame > 1000 / fps) {
          offset = (offset + 0.1) % patternWidth;
          pattern.setAttribute('patternTransform', `rotate(45) translate(${offset},0)`);
          lastFrame = now;
        }
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    })();
    </script>
</body>
</html>